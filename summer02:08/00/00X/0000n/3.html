<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>dates</title>
</head>


<style>



    .labeltext0 {
        font-size: 16px ;
        font-family: SimSun;
        font-weight:bold;
        fill:#000001;
    }






</style>






<body>

<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>

<script>




    var width = 900;
    var height = 600;



    var color = d3.scale.category20();



    var svg = d3.select("body").append("svg")
            .attr("width",width)
            .attr("height",height);


    d3.json("/WebstormProjects/summer/00/00X/0000n/author.json",function(error,root) {



        if (error) {
            return console.log(error);
        }
        console.log(root);

        var u = window.location.href;
        var ur = u.split('?')[1];
        var url = ur.split('=')[1];
        console.log(url);
        var urlf = url.replace(/_/g, ' ');
        console.log(urlf);


        svg.append("rect")
                .attr("width", urlf.length * 8)
                .attr("height", 30)
                .attr("fill", "yellow")
                .attr('transform', 'translate(0,10)')
        ;


        var label = svg.append("text")
                .attr("class", "labeltext0")
                .attr("x", 0)
                .attr("y", 30)
                .text(urlf)
                ;

//++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++


        var y=[];
        var t0=[];//2011
        var t1=[];//2012
        var t2=[];//2013
        var t3=[];//2014
        var s=[];
        var m=[];


        var counterdate=0;
        var countertitle=0;
        var countersim=0;
        var countermatch=0;


        for (i = 0; i < root.length; i++) {

            //把提取出来的  年份放入一个数组, 以便写 X轴
            //把提取出来的  co-author 放入一个数组, 以便  写  y轴
            //根据   横坐标 与  纵坐标  来  加点?
            //加线是加+    invisible 的线??????

            //在老师画的图的那个地方!!!
            //要把   例如  2013年具体是什么项目给想办法表示出来

            //像直方图那样,  数据转化后已经有 x轴的具体坐标了
            //那就   访问进 x轴的坐标
            //+
            //到时候再访问进y轴的坐标
            //就获得了 点的坐标!!!!========
            //====想添加点
            //====就参考     散点图!!!!!!!!!!!!!


            //date 最大也就是到了 2011 ~~~~~2014


            var n=root[i]["Name"].replace(/,/g, ' ');
                     console.log(n);


            if (urlf == root[i]["Name"].replace(/,/g, ' ')) {
                y.push(   {"mi": counterdate, "date": root[i]["Year"] , "title": root[i]["Title"],
                    "sim": root[i]["SimplAuth"],  "match": root[i]["MatchCPC"]}  );
                counterdate = counterdate + 1;

            };
//
//            if (urlf == root[i]["Name"].replace(/,/g, ' ')) {
//                t.push({"mi": countertitle, "title": root[i]["Title"]});
//                countertitle = countertitle + 1;
//
//            };
//
//            if (urlf == root[i]["Name"].replace(/,/g, ' ')) {
//                s.push({"mi": countersim, "sim": root[i]["SimplAuth"]});
//                countersim = countersim + 1;
//
//            };
//
//            if (urlf == root[i]["Name"].replace(/,/g, ' ')) {
//                m.push({"mi": countermatch, "match": root[i]["MatchCPC"]});
//                countermatch = countermatch + 1;
//
//            };


        }

        console.log(y);

//x轴坐标    date
//为每一个都 弄成   [2011, 2012,2013, 2014]
//tickFormat 来制定  文字  格式!!!



        var timeset= [2011, 2012,2013, 2014];


for(ii in y){
    if(y[ii]["date"]==2011) {
        t0.push(y[ii]);
    }
    else if(y[ii]["date"]==2012){
        t1.push(y[ii]);
    }
    else if(y[ii]["date"]==2013){
        t2.push(y[ii]);
    }
    else if (y[ii]["date"]==2014){
        t3.push(y[ii]);
    }

}

        console.log(t0);
        console.log(t1);
        console.log(t2);
        console.log(t3);




















    })






</script>

</body>
</html>